<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Daily Question Tracker - Identity Transformation</title>
    <meta
      name="description"
      content="Track your identity transformation with daily questions"
    />
    <meta name="theme-color" content="#000000" />
    <link
      rel="manifest"
      href="data:application/json;base64,ewogICJuYW1lIjogIkRhaWx5IFF1ZXN0aW9uIFRyYWNrZXIiLAogICJzaG9ydF9uYW1lIjogIklkZW50aXR5IFRyYWNrZXIiLAogICJkZXNjcmlwdGlvbiI6ICJUcmFjayB5b3VyIGlkZW50aXR5IHRyYW5zZm9ybWF0aW9uIHdpdGggZGFpbHkgcXVlc3Rpb25zIiwKICAic3RhcnRfdXJsIjogIi8iLAogICJkaXNwbGF5IjogInN0YW5kYWxvbmUiLAogICJiYWNrZ3JvdW5kX2NvbG9yIjogIiNmZmZmZmYiLAogICJ0aGVtZV9jb2xvciI6ICIjMDAwMDAwIiwKICAiaWNvbnMiOiBbCiAgICB7CiAgICAgICJzcmMiOiAiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQSE4yWnlCNGJXeHVjejBpYUhSMGNEb3ZMM2QzZHk1M000UnZjbWN2TWpBd01DOXpkbWNpSUhacFpYZENiM2c5SWpBZ01DQXhNREFnTVRBd0lqNDhjbVZqZENCM2FXUjBhRDBpTVRBd0lpQm9aV2xuYUhROUlqRXdNQ0lpSUdacGJHdzlJaU13TURBd01EQWlMejQ4ZEdWNGRDQjRQU0kxTUNJZ2VUMGlOakFpSUhSbGVIUXRZVzVqYUc5eVBTSnRhV1JrYkdVaUlHWnBiR3c5SW1kc2IySmhiQ2duZDJocGRHVW5JeWNnWm05dWRDMXphWHBsUFNJME1DSWlQand2ZEdWNGRENDhMM04yWno0PSIsCiAgICAgICJzaXplcyI6ICIxMDB4MTAwIiwKICAgICAgInR5cGUiOiAiaW1hZ2Uvc3ZnK3htbCIKICAgIH0sCiAgICB7CiAgICAgICJzcmMiOiAiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQSE4yWnlCNGJXeHVjejBpYUhSMGNEb3ZMM2QzZHk1M000UnZjbWN2TWpBd01DOXpkbWNpSUhacFpYZENiM2c5SWpBZ01DQXhNREFnTVRBd0lqNDhjbVZqZENCM2FXUjBhRDBpTVRBd0lpQm9aV2xuYUhROUlqRXdNQ0lpSUdacGJHczlJaU13TURBd01EQWlMejQ4ZEdWNGRDQjRQU0kxTUNJZ2VUMGlOakFpSUhSbGVIUXRZVzVqYUc5eVBTSnRhV1JrYkdVaUlHWnBiR3c5SW1kc2IySmhiQ2duZDJocGRHVW5JeWNnWm05dWRDMXphWHBsUFNJME1DSWlQand2ZEdWNGRENDhMM04yWno0PSIsCiAgICAgICJzaXplcyI6ICIxOTJ4MTkyIiwKICAgICAgInR5cGUiOiAiaW1hZ2Uvc3ZnK3htbCIKICAgIH0sCiAgICB7CiAgICAgICJzcmMiOiAiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQSE4yWnlCNGJXeHVjejBpYUhSMGNEb3ZMM2QzZHk1M000UnZjbWN2TWpBd01DOXpkbWNpSUhacFpYZENiM2c5SWpBZ01DQXhNREFnTVRBd0lqNDhjbVZqZENCM2FXUjBhRDBpTVRBd0lpQm9aV2xuYUhROUlqRXdNQ0lpSUdacGJHczlJaU13TURBd01EQWlMejQ4ZEdWNGRDQjRQU0kxTUNJZ2VUMGlOakFpSUhSbGVIUXRZVzVqYUc5eVBTSnRhV1JrYkdVaUlHWnBiR3c5SW1kc2IySmhiQ2duZDJocGRHVW5JeWNnWm05dWRDMXphWHBsUFNJME1DSWlQand2ZEdWNGRENDhMM04yWno0PSIsCiAgICAgICJzaXplcyI6ICI1MTJ4NTEyIiwKICAgICAgInR5cGUiOiAiaW1hZ2Uvc3ZnK3htbCIKICAgIH0KICBdCn0="
    />
    <link
      rel="apple-touch-icon"
      href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48cmVjdCB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgZmlsbD0iIzAwMDAwMCIvPjx0ZXh0IHg9IjUwIiB5PSI2MCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZmlsbD0iZ2xvYmFsKCd3aGl0ZScpIiBmb250LXNpemU9IjQwIj4/PC90ZXh0Pjwvc3ZnPg=="
    />
    <style>
      * {
          margin: 0;
          padding: 0;
          box-sizing: border-box;
      }

      body {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
          background: #ffffff;
          color: #000000;
          line-height: 1.6;
          font-size: 16px;
      }

      .container {
          max-width: 1200px;
          margin: 0 auto;
          padding: 40px 20px;
      }

      h1 {
          font-size: clamp(2.5rem, 5vw, 4rem);
          font-weight: 700;
          color: #000000;
          margin-bottom: 20px;
          line-height: 1.1;
          letter-spacing: -0.02em;
      }

      .hero-text {
          font-size: clamp(1.2rem, 2.5vw, 1.5rem);
          color: #666666;
          margin-bottom: 60px;
          max-width: 800px;
          font-weight: 400;
          line-height: 1.4;
      }

      .section {
          margin-bottom: 80px;
          border-bottom: 1px solid #e5e5e5;
          padding-bottom: 60px;
      }

      .section:last-child {
          border-bottom: none;
          padding-bottom: 0;
      }

      .section h2 {
          font-size: clamp(1.8rem, 3vw, 2.5rem);
          font-weight: 600;
          color: #000000;
          margin-bottom: 30px;
          line-height: 1.2;
          letter-spacing: -0.01em;
      }

      .form-group {
          margin-bottom: 30px;
      }

      label {
          display: block;
          margin-bottom: 12px;
          color: #000000;
          font-weight: 500;
          font-size: 1.1rem;
      }

      input, textarea, select {
          width: 100%;
          padding: 16px 20px;
          border: 2px solid #000000;
          border-radius: 8px;
          font-size: 16px;
          font-family: inherit;
          background: #ffffff;
          color: #000000;
          transition: all 0.2s ease;
      }

      input:focus, textarea:focus, select:focus {
          outline: none;
          border-color: #000000;
          box-shadow: 0 0 0 4px rgba(0, 0, 0, 0.1);
      }

      textarea {
          resize: vertical;
          min-height: 120px;
          line-height: 1.5;
      }

      button {
          background: #000000;
          color: #ffffff;
          border: none;
          padding: 16px 32px;
          font-size: 16px;
          font-weight: 500;
          cursor: pointer;
          transition: all 0.2s ease;
          margin-right: 15px;
          margin-bottom: 15px;
          text-transform: uppercase;
          letter-spacing: 0.5px;
          font-family: inherit;
          border-radius: 8px;
      }

      button:hover {
          background: #333333;
          transform: translateY(-1px);
      }

      button:active {
          transform: translateY(0);
      }

      button.secondary {
          background: transparent;
          color: #000000;
          border: 2px solid #000000;
      }

      button.secondary:hover {
          background: #000000;
          color: #ffffff;
      }

      .question-display {
          background: #f8f8f8;
          padding: 40px;
          margin: 40px 0;
          border-left: 4px solid #000000;
      }

      .question-display h3 {
          color: #000000;
          margin-bottom: 20px;
          font-size: 1.3rem;
          font-weight: 600;
      }

      .question-display p {
          color: #000000;
          font-size: 1.2rem;
          font-weight: 400;
          line-height: 1.4;
      }

      .answers-list {
          max-height: 500px;
          overflow-y: auto;
          border: 2px solid #000000;
          background: #ffffff;
      }

      .answer-item {
          padding: 30px;
          border-bottom: 1px solid #e5e5e5;
          transition: background-color 0.2s ease;
      }

      .answer-item:hover {
          background: #f8f8f8;
      }

      .answer-item:last-child {
          border-bottom: none;
      }

      .answer-date {
          font-weight: 600;
          color: #000000;
          font-size: 1rem;
          text-transform: uppercase;
          letter-spacing: 0.5px;
          margin-bottom: 10px;
      }

      .answer-text {
          color: #333333;
          font-size: 1.1rem;
          line-height: 1.5;
          margin-bottom: 15px;
      }

      .status {
          padding: 20px 30px;
          margin: 30px 0;
          font-weight: 500;
          font-size: 1.1rem;
          border: 2px solid;
          text-align: center;
      }

      .status.success {
          background: #f0f8f0;
          color: #2d5016;
          border-color: #2d5016;
      }

      .status.info {
          background: #f0f0f8;
          color: #1a1a2e;
          border-color: #1a1a2e;
      }

      .time-display {
          font-family: 'Courier New', monospace;
          font-size: 1.2rem;
          font-weight: 700;
          color: #000000;
      }

      .stats-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
          gap: 30px;
          margin: 40px 0;
      }

      .stat-card {
          text-align: center;
          padding: 30px;
          border: 2px solid #000000;
          background: #ffffff;
      }

      .stat-number {
          font-size: 3rem;
          font-weight: 700;
          color: #000000;
          line-height: 1;
          margin-bottom: 10px;
      }

      .stat-label {
          font-size: 1rem;
          color: #666666;
          text-transform: uppercase;
          letter-spacing: 0.5px;
          font-weight: 500;
      }

      .empty-state {
          text-align: center;
          padding: 60px 20px;
          color: #666666;
          font-size: 1.2rem;
      }

      .empty-state::before {
          content: "â†’";
          display: block;
          font-size: 4rem;
          font-weight: 700;
          color: #000000;
          margin-bottom: 20px;
      }

      .privacy-notice {
          background: #f0f0f8;
          border: 2px solid #1a1a2e;
          border-radius: 8px;
          padding: 20px;
          margin: 30px 0;
          font-size: 0.9rem;
          color: #1a1a2e;
          text-align: center;
      }

      .privacy-notice strong {
          color: #000000;
      }
          .container {
              padding: 20px 15px;
          }

          .section {
              margin-bottom: 50px;
              padding-bottom: 40px;
          }

          button {
              width: 100%;
              margin-right: 0;
          }

          .question-display {
              padding: 25px;
          }

          .answer-item {
              padding: 20px;
          }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>Daily Questions</h1>
      <p class="hero-text">
        Track your thoughts, build your habits, own your narrative. Stop chasing
        answers â€” start creating them.
      </p>

      <div class="privacy-notice">
        <strong>ðŸ”’ Privacy First:</strong> All your answers are saved locally on
        your computer only. Nothing is sent to any server or shared with anyone.
        Your thoughts remain completely private.
      </div>

      <div class="section">
        <h2>Configure</h2>
        <div class="form-group">
          <label for="reminderTime">Daily Reminder Time</label>
          <input type="time" id="reminderTime" value="17:00" />
        </div>
        <button onclick="saveSettings()">Save Settings</button>
        <button class="secondary" onclick="testNotification()">
          Test Alert
        </button>
        <button class="secondary" onclick="showInstallInstructions()">
          Install as App
        </button>
      </div>

      <div class="section">
        <h2>Today</h2>
        <div class="question-display" id="questionDisplay">
          <h3 id="todayDate"></h3>
          <p>
            Did I act like my new identity today?<br />What did I do to prove
            it?
          </p>
        </div>
        <div class="form-group">
          <label for="question1Answer"
            >Did I act like my new identity today?</label
          >
          <textarea
            id="question1Answer"
            placeholder="Yes/No and how..."
          ></textarea>
        </div>
        <div class="form-group">
          <label for="question2Answer">What did I do to prove it?</label>
          <textarea
            id="question2Answer"
            placeholder="Specific actions and evidence..."
          ></textarea>
        </div>
        <button onclick="saveAnswer()">Save Answers</button>
      </div>

      <div class="section">
        <h2>Progress</h2>
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-number" id="totalAnswers">0</div>
            <div class="stat-label">Total Answers</div>
          </div>
          <div class="stat-card">
            <div class="stat-number" id="currentStreak">0</div>
            <div class="stat-label">Day Streak</div>
          </div>
          <div class="stat-card">
            <div class="stat-number" id="thisMonth">0</div>
            <div class="stat-label">This Month</div>
          </div>
        </div>
      </div>

      <div class="section">
        <h2>History</h2>
        <div class="answers-list" id="answersList">
          <div class="empty-state">
            Start your journey. Answer today's question.
          </div>
        </div>
        <button onclick="exportToCSV()">Export Data</button>
        <button class="secondary" onclick="showReportView()">
          View Report
        </button>
        <button class="secondary" onclick="clearAllData()">Clear All</button>
      </div>

      <div class="section">
        <h2>System</h2>
        <div id="notificationStatus" class="status info">
          Next reminder:
          <span class="time-display" id="nextReminder">Not set</span>
        </div>
      </div>
    </div>

    <script>
      let settings = { reminderTime: "17:00" };
      let answers = [];
      let notificationPermission = false;

      document.addEventListener("DOMContentLoaded", function () {
        loadData();
        updateDisplay();
        setupNotificationPermission();
        scheduleNextReminder();
        updateTodayDate();
        updateStats();
      });

      function updateTodayDate() {
        const today = new Date().toLocaleDateString("en-US", {
          weekday: "long",
          year: "numeric",
          month: "long",
          day: "numeric",
        });
        document.getElementById("todayDate").textContent = today.toUpperCase();
      }

      function loadData() {
        try {
          const savedSettings = localStorage.getItem("dailyQuestionSettings");
          if (savedSettings) settings = JSON.parse(savedSettings);

          const savedAnswers = localStorage.getItem("dailyQuestionAnswers");
          if (savedAnswers) answers = JSON.parse(savedAnswers);
        } catch (e) {
          console.error("Error loading data:", e);
        }
      }

      function saveData() {
        try {
          localStorage.setItem(
            "dailyQuestionSettings",
            JSON.stringify(settings),
          );
          localStorage.setItem("dailyQuestionAnswers", JSON.stringify(answers));
        } catch (e) {
          console.error("Error saving data:", e);
        }
      }

      function updateDisplay() {
        document.getElementById("reminderTime").value = settings.reminderTime;

        const today = new Date().toDateString();
        const todayAnswer = answers.find(
          (a) => new Date(a.date).toDateString() === today,
        );
        if (todayAnswer) {
          document.getElementById("question1Answer").value =
            todayAnswer.answer1 || "";
          document.getElementById("question2Answer").value =
            todayAnswer.answer2 || "";
        } else {
          document.getElementById("question1Answer").value = "";
          document.getElementById("question2Answer").value = "";
        }

        updateAnswersList();
        updateNextReminderDisplay();
      }

      function updateAnswersList() {
        const list = document.getElementById("answersList");
        if (answers.length === 0) {
          list.innerHTML =
            '<div class="empty-state">Start your journey. Answer today\'s question.</div>';
          return;
        }

        const sortedAnswers = [...answers].sort(
          (a, b) => new Date(b.date) - new Date(a.date),
        );
        list.innerHTML = sortedAnswers
          .map(
            (answer) => `
                <div class="answer-item">
                    <div class="answer-date">${new Date(answer.date)
                      .toLocaleDateString("en-US", {
                        weekday: "short",
                        year: "numeric",
                        month: "short",
                        day: "numeric",
                      })
                      .toUpperCase()}</div>
                    <div class="answer-text">
                        <strong>Did I act like my new identity today?</strong><br>
                        ${answer.answer1 || "No answer recorded"}
                    </div>
                    <div class="answer-text">
                        <strong>What did I do to prove it?</strong><br>
                        ${answer.answer2 || "No answer recorded"}
                    </div>
                </div>
            `,
          )
          .join("");
      }

      function updateStats() {
        const totalAnswers = answers.length;
        document.getElementById("totalAnswers").textContent = totalAnswers;

        const today = new Date();
        let streak = 0;
        let checkDate = new Date(today);

        while (true) {
          const hasAnswer = answers.some(
            (a) => new Date(a.date).toDateString() === checkDate.toDateString(),
          );
          if (hasAnswer) {
            streak++;
            checkDate.setDate(checkDate.getDate() - 1);
          } else {
            break;
          }
        }

        document.getElementById("currentStreak").textContent = streak;

        const thisMonth = answers.filter((a) => {
          const answerDate = new Date(a.date);
          return (
            answerDate.getMonth() === today.getMonth() &&
            answerDate.getFullYear() === today.getFullYear()
          );
        }).length;

        document.getElementById("thisMonth").textContent = thisMonth;
      }

      function saveSettings() {
        settings.reminderTime = document.getElementById("reminderTime").value;
        saveData();
        scheduleNextReminder();
        showStatus("Settings saved", "success");
      }

      function saveAnswer() {
        const answer1 = document.getElementById("question1Answer").value.trim();
        const answer2 = document.getElementById("question2Answer").value.trim();

        if (!answer1 && !answer2) {
          showStatus("Enter at least one answer", "info");
          return;
        }

        const today = new Date();
        const todayString = today.toDateString();

        const existingIndex = answers.findIndex(
          (a) => new Date(a.date).toDateString() === todayString,
        );

        const answerData = {
          date: today.toISOString(),
          answer1: answer1,
          answer2: answer2,
        };

        if (existingIndex >= 0) {
          answers[existingIndex] = answerData;
          showStatus("Answers updated", "success");
        } else {
          answers.push(answerData);
          showStatus("Answers saved", "success");
        }

        saveData();
        updateAnswersList();
        updateStats();
      }

      function exportToCSV() {
        if (answers.length === 0) {
          showStatus("No data to export", "info");
          return;
        }

        const headers = [
          "Date",
          "Question 1",
          "Answer 1",
          "Question 2",
          "Answer 2",
        ];
        const csvContent = [
          headers.join(","),
          ...answers.map((answer) =>
            [
              `"${new Date(answer.date).toLocaleDateString()}"`,
              `"Did I act like my new identity today?"`,
              `"${(answer.answer1 || "").replace(/"/g, '""')}"`,
              `"What did I do to prove it?"`,
              `"${(answer.answer2 || "").replace(/"/g, '""')}"`,
            ].join(","),
          ),
        ].join("\n");

        const blob = new Blob([csvContent], { type: "text/csv" });
        const url = window.URL.createObjectURL(blob);
        const a = document.createElement("a");
        a.href = url;
        a.download = `daily-questions-${new Date().toISOString().split("T")[0]}.csv`;
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        window.URL.revokeObjectURL(url);

        showStatus("Data exported", "success");
      }

      function clearAllData() {
        if (confirm("Delete all answers? This cannot be undone.")) {
          answers = [];
          saveData();
          updateAnswersList();
          updateStats();
          document.getElementById("question1Answer").value = "";
          document.getElementById("question2Answer").value = "";
          showStatus("All data cleared", "info");
        }
      }

      function setupNotificationPermission() {
        if ("Notification" in window) {
          if (Notification.permission === "granted") {
            notificationPermission = true;
          }
          // Don't automatically request permission on page load
        }
      }

      function testNotification() {
        console.log("Test notification clicked");
        console.log("Notification support:", "Notification" in window);
        console.log("Current permission:", Notification.permission);

        if ("Notification" in window) {
          if (Notification.permission === "granted") {
            console.log("Permission already granted, sending notification");
            try {
              const notification = new Notification("Daily Identity Check", {
                body: "Did I act like my new identity today? What did I do to prove it?",
                icon: 'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><rect width="100" height="100" fill="black"/><text x="50" y="60" text-anchor="middle" fill="white" font-size="40">?</text></svg>',
                requireInteraction: false,
                tag: "daily-identity-check",
              });
              console.log("Notification created:", notification);
              showStatus("Test notification sent", "success");
            } catch (error) {
              console.error("Error creating notification:", error);
              showStatus(
                "Error creating notification: " + error.message,
                "info",
              );
            }
          } else if (Notification.permission === "denied") {
            console.log("Permission denied");
            showStatus("Notifications blocked. Check browser settings", "info");
          } else {
            console.log("Requesting permission...");
            Notification.requestPermission()
              .then((permission) => {
                console.log("Permission result:", permission);
                if (permission === "granted") {
                  notificationPermission = true;
                  try {
                    const notification = new Notification(
                      "Daily Identity Check",
                      {
                        body: "Did I act like my new identity today? What did I do to prove it?",
                        icon: 'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><rect width="100" height="100" fill="black"/><text x="50" y="60" text-anchor="middle" fill="white" font-size="40">?</text></svg>',
                        tag: "daily-identity-check",
                      },
                    );
                    console.log(
                      "Notification after permission granted:",
                      notification,
                    );
                    showStatus(
                      "Permission granted! Test notification sent",
                      "success",
                    );
                  } catch (error) {
                    console.error("Error after permission granted:", error);
                    showStatus("Error: " + error.message, "info");
                  }
                } else {
                  console.log("Permission denied by user");
                  showStatus("Notification permission denied", "info");
                }
              })
              .catch((error) => {
                console.error("Error requesting permission:", error);
                showStatus(
                  "Error requesting permission: " + error.message,
                  "info",
                );
              });
          }
        } else {
          console.log("Notifications not supported");
          showStatus("Notifications not supported in this browser", "info");
        }
      }

      function scheduleNextReminder() {
        const now = new Date();
        const [hours, minutes] = settings.reminderTime.split(":").map(Number);

        let nextReminder = new Date();
        nextReminder.setHours(hours, minutes, 0, 0);

        if (nextReminder <= now) {
          nextReminder.setDate(nextReminder.getDate() + 1);
        }

        const timeUntilReminder = nextReminder.getTime() - now.getTime();

        if (window.reminderTimeout) {
          clearTimeout(window.reminderTimeout);
        }

        window.reminderTimeout = setTimeout(() => {
          if (Notification.permission === "granted") {
            new Notification("Daily Identity Check", {
              body: "Did I act like my new identity today? What did I do to prove it?",
              tag: "daily-reminder",
            });
          }
          scheduleNextReminder();
        }, timeUntilReminder);

        updateNextReminderDisplay();
      }

      function updateNextReminderDisplay() {
        const reminderElement = document.getElementById("nextReminder");
        if (!reminderElement) return; // Safety check

        const now = new Date();
        const [hours, minutes] = settings.reminderTime.split(":").map(Number);

        let nextReminder = new Date();
        nextReminder.setHours(hours, minutes, 0, 0);

        if (nextReminder <= now) {
          nextReminder.setDate(nextReminder.getDate() + 1);
        }

        const options = {
          weekday: "short",
          month: "short",
          day: "numeric",
          hour: "2-digit",
          minute: "2-digit",
        };

        reminderElement.textContent = nextReminder
          .toLocaleDateString("en-US", options)
          .toUpperCase();
      }

      function showStatus(message, type) {
        const statusDiv = document.getElementById("notificationStatus");
        statusDiv.innerHTML = `<span class="time-display">${message.toUpperCase()}</span>`;
        statusDiv.className = `status ${type}`;

        setTimeout(() => {
          statusDiv.innerHTML = `Next reminder: <span class="time-display" id="nextReminder">Not set</span>`;
          statusDiv.className = "status info";
          updateNextReminderDisplay();
        }, 2000);
      }

      function showInstallInstructions() {
        const modal = document.createElement("div");
        modal.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100%; height: 100%;
                background: rgba(0,0,0,0.8); display: flex; align-items: center;
                justify-content: center; z-index: 1000; padding: 20px;
            `;

        const content = document.createElement("div");
        content.style.cssText = `
                background: white; border: 2px solid black; padding: 40px;
                max-width: 500px; width: 100%; max-height: 80vh; overflow-y: auto;
            `;

        content.innerHTML = `
                <h3 style="margin-bottom: 20px; font-size: 1.5rem;">Install as Desktop App</h3>
                <div style="line-height: 1.6; margin-bottom: 30px;">
                    <strong>Chrome/Edge:</strong><br>
                    1. Click browser menu (â‹®)<br>
                    2. Look for "Install" or "Apps" â†’ "Install this site as an app"<br><br>
                    <strong>Safari:</strong><br>
                    1. Bookmark this page<br>
                    2. Drag bookmark to Desktop<br><br>
                    <strong>Any Browser:</strong><br>
                    1. Save this HTML file to Desktop<br>
                    2. Double-click to open anytime
                </div>
                <div style="text-align: center;">
                    <button onclick="this.closest('[style*=fixed]').remove()"
                            style="background: black; color: white; border: none; padding: 12px 24px; cursor: pointer;">
                        Close
                    </button>
                </div>
            `;

        modal.appendChild(content);
        document.body.appendChild(modal);
      }

      function showReportView() {
        if (answers.length === 0) {
          showStatus("No answers to display yet", "info");
          return;
        }

        const modal = document.createElement("div");
        modal.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100%; height: 100%;
                background: rgba(0,0,0,0.9); display: flex; align-items: center;
                justify-content: center; z-index: 1000; padding: 20px;
            `;

        const content = document.createElement("div");
        content.style.cssText = `
                background: white; border: 3px solid black; width: 90%; max-width: 900px;
                height: 85vh; display: flex; flex-direction: column;
            `;

        const stats = calculateReportStats();
        const sortedAnswers = [...answers].sort(
          (a, b) => new Date(b.date) - new Date(a.date),
        );

        content.innerHTML = `
                <div style="padding: 30px; border-bottom: 2px solid black; background: #f8f8f8;">
                    <h2 style="margin: 0 0 20px 0; font-size: 2rem;">Identity Transformation Report</h2>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 20px;">
                        <div style="text-align: center; padding: 20px; border: 2px solid black; background: white;">
                            <div style="font-size: 2rem; font-weight: 700; color: black;">${stats.totalEntries}</div>
                            <div style="font-size: 0.9rem; color: #666; text-transform: uppercase;">Total Days</div>
                        </div>
                        <div style="text-align: center; padding: 20px; border: 2px solid black; background: white;">
                            <div style="font-size: 2rem; font-weight: 700; color: black;">${stats.currentStreak}</div>
                            <div style="font-size: 0.9rem; color: #666; text-transform: uppercase;">Current Streak</div>
                        </div>
                        <div style="text-align: center; padding: 20px; border: 2px solid black; background: white;">
                            <div style="font-size: 2rem; font-weight: 700; color: black;">${stats.thisMonth}</div>
                            <div style="font-size: 0.9rem; color: #666; text-transform: uppercase;">This Month</div>
                        </div>
                    </div>
                </div>

                <div style="flex: 1; padding: 30px; overflow-y: auto;">
                    ${sortedAnswers
                      .map((answer) => {
                        const date = new Date(answer.date);
                        const formattedDate = date.toLocaleDateString("en-US", {
                          weekday: "long",
                          year: "numeric",
                          month: "long",
                          day: "numeric",
                        });

                        return `
                            <div style="margin-bottom: 40px; padding: 25px; border: 2px solid #e5e5e5; background: #fafafa;">
                                <div style="font-size: 1.1rem; font-weight: 700; color: black; margin-bottom: 20px; text-transform: uppercase;">
                                    ${formattedDate}
                                </div>
                                <div style="margin-bottom: 20px;">
                                    <div style="font-weight: 600; color: black; margin-bottom: 8px;">Did I act like my new identity today?</div>
                                    <div style="color: #333; line-height: 1.6; padding-left: 15px; border-left: 3px solid black;">
                                        ${answer.answer1 || "No answer recorded"}
                                    </div>
                                </div>
                                <div>
                                    <div style="font-weight: 600; color: black; margin-bottom: 8px;">What did I do to prove it?</div>
                                    <div style="color: #333; line-height: 1.6; padding-left: 15px; border-left: 3px solid black;">
                                        ${answer.answer2 || "No answer recorded"}
                                    </div>
                                </div>
                            </div>
                        `;
                      })
                      .join("")}
                </div>

                <button onclick="this.closest('[style*=fixed]').remove()"
                        style="position: absolute; top: 20px; right: 20px; background: black; color: white;
                               border: none; width: 40px; height: 40px; cursor: pointer; font-size: 20px;">Ã—</button>
            `;

        modal.appendChild(content);
        document.body.appendChild(modal);

        modal.addEventListener("click", (e) => {
          if (e.target === modal) modal.remove();
        });
      }

      function calculateReportStats() {
        const totalEntries = answers.length;
        const today = new Date();

        let streak = 0;
        let checkDate = new Date(today);
        while (true) {
          const hasAnswer = answers.some(
            (a) => new Date(a.date).toDateString() === checkDate.toDateString(),
          );
          if (hasAnswer) {
            streak++;
            checkDate.setDate(checkDate.getDate() - 1);
          } else {
            break;
          }
        }

        const thisMonth = answers.filter((a) => {
          const answerDate = new Date(a.date);
          return (
            answerDate.getMonth() === today.getMonth() &&
            answerDate.getFullYear() === today.getFullYear()
          );
        }).length;

        return { totalEntries, currentStreak: streak, thisMonth };
      }

      setInterval(updateNextReminderDisplay, 60000);
    </script>
  </body>
</html>
